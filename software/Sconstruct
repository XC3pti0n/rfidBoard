import os

env = Environment(
        ENV = os.environ,

        CC = 'arm-none-eabi-gcc',
        CCFLAGS = '-O2 -Wall -Wextra -fno-common -ggdb -mcpu=cortex-m3 -mthumb', 
        
        CPPPATH = 'include',

        LINK = 'arm-none-eabi-gcc',
        LINKFLAGS = '-Wall -mcpu=cortex-m3 -mthumb -Tstm32f103.ld'
)

sources = ['main.c', 'system_stm32f10x.c']

firmware = env.Program('rfid.elf', sources)
env.Depends(firmware, 'stm32f103.ld')

env.Command('prog', ['rfid.elf'], 'arm-none-eabi-gdb $SOURCE')

Default('rfid.elf')

